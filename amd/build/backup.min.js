define("local_solent/backup",["exports","core/ajax","core/pending"],(function(_exports,_ajax,_pending){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.getImportRestrictions=void 0,_ajax=_interopRequireDefault(_ajax),_pending=_interopRequireDefault(_pending);_exports.getImportRestrictions=function(){var request={methodname:"local_solent_get_import_restrictions",args:[]},pendingPromise=new _pending.default("local/solent:getImportRestrictions");return _ajax.default.call([request])[0].then(restrictactivitybackup).catch(),pendingPromise.resolve()};var restrictactivitybackup=function(data){var biform=document.querySelector('#page-backup-import div[role="main"] form');if(biform.stage){var stage=biform.stage.value,jumpto=document.querySelector('[name="oneclickbackup"]'),legacy=document.querySelector('[name="setting_root_legacyfiles"]');if(jumpto&&(jumpto.style.display="none",jumpto.setAttribute("disabled",!0)),legacy&&(legacy.removeAttribute("checked"),legacy.setAttribute("disabled",!0),legacy.value=0),data)if(2==stage)biform.querySelectorAll('input[type="checkbox"]').forEach((function(checkbox){var name=checkbox.name,label=checkbox.parentNode.textContent.replaceAll("Â "," ").replaceAll("\n"," ");data.forEach((function(item){item.activity&&item.title?-1!=name.search(new RegExp("activity_"+item.activity+"[0-9a-z_]+included"))&&-1!=label.search(item.title)&&(checkbox.setAttribute("checked",!1),checkbox.setAttribute("disabled",!0)):item.activity?-1!=name.search(new RegExp("activity_"+item.activity+"[0-9a-z_]+included"))&&(checkbox.setAttribute("checked",!1),checkbox.setAttribute("disabled",!0)):item.title&&-1!=label.search(item.title)&&(checkbox.setAttribute("checked",!1),checkbox.setAttribute("disabled",!0))}))}))}}}));

//# sourceMappingURL=backup.min.js.map